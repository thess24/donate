{% extends 'base.html' %}


{% block head %}
<style type="text/css">

.clock{
zoom: 0.55;
-moz-transform: scale(0.55)
}

</style>

<script type="text/javascript" src="https://js.stripe.com/v2/"></script>

<link rel="stylesheet" href="{{STATIC_URL}}css/wizard.css">


<!-- form wizard -->
<!-- <link href="http://www.fuelcdn.com/fuelux-imh/2.4.0/css/fuelux.css" rel="stylesheet" />
<link href="http://www.fuelcdn.com/fuelux-imh/2.4.0/css/fuelux-responsive.css" rel="stylesheet" /> -->

{% endblock %}
 

{% block crumbs %}
<h1 class="pull-left">Get Tickets</h1>
{% endblock %}


{% block content %} 

<!-- <div id="MyWizard" class="wizard">
  <ul class="widard-steps">
    <li data-target="#step1" class="active"><span class="badge badge-info">1</span>Step 1<span class="chevron"></span></li>
    <li data-target="#step2"><span class="badge">2</span>Step 2<span class="chevron"></span></li>
    <li data-target="#step3"><span class="badge">3</span>Step 3<span class="chevron"></span></li>
    <li data-target="#step4"><span class="badge">4</span>Step 4<span class="chevron"></span></li>
    <li data-target="#step5"><span class="badge">5</span>Step 5<span class="chevron"></span></li>
  </ul>
  <div class="actions">
    <button type="button" class="btn btn-mini btn-prev"> <i class="icon-arrow-left"></i>Prev</button>
    <button type="button" class="btn btn-mini btn-next" data-last="Finish">Next<i class="icon-arrow-right"></i></button>
  </div>
</div>
<div class="step-content">
  <div class="step-pane active" id="step1">This is step 1</div>
  <div class="step-pane" id="step2">This is step 2</div>
  <div class="step-pane" id="step3">This is step 3</div>
  <div class="step-pane" id="step4">This is step 4</div>
  <div class="step-pane" id="step5">This is step 5</div>
</div> -->
              <div class="row">
                <div class="col-md-12">
                  <div class="panel panel-success">

                    <div class="panel-heading">
                      <h4 class="lighter">Get Some Tickets!</h4>


                    </div>

                    <div class="panel-body">
                      <div class="widget-main">
                        <div class="row">
                          <div id="fuelux-wizard" class="row" data-target="#step-container">
                            <ul class="wizard-steps">
                              <li data-target="#step1" class="active">
                                <span class="step">1</span>
                                <span class="title">Number of Tickets</span>
                              </li>

                              <li data-target="#step2">
                                <span class="step">2</span>
                                <span class="title">Credit Card Info</span>
                              </li>

                              <li data-target="#step3">
                                <span class="step">3</span>
                                <span class="title">Confirm</span>
                              </li>

                            </ul>
                          </div>

                          <hr />
                          <div class="step-content row-fluid position-relative" id="step-container">
                            <div class="step-pane active" id="step1">

                                            <div class="form-row">
                                            <label>
                                            <span> Number of Tickets</span>
                                            <input type="text" name='ticketnumber' class='form-control fc-mod' id='id_ticketnumber'/>
                                            </label>
                                            </div>

                            </div>

                            <div class="step-pane" id="step2">
                                    <div class='row'>
                                      <div class='col-md-12'>
                                        <div class='col-md-6'>
                                          <div class="panel panel-default">
                                            <div class="panel-heading">
                                              Billing Information
                                            </div>
                                            <div class="panel-body">


                                                      <div class="form-row">
                                                      <label>
                                                      <span>Name</span>
                                                      <input type="text" data-stripe="name" class='form-control fc-mod'/>
                                                      </label>
                                                      </div>
                                                       
                                                      <div class="form-row">
                                                      <label>
                                                      <span>Zip</span>
                                                      <input type="text" size="3" data-stripe="address_zip" class='form-control fc-mod'/>
                                                      </label>

                                                      <label>
                                                      <span> State </span>
                                                      <input type="text" size="4" data-stripe="address_state" class='form-control fc-mod'/>
                                                      </label>
                                                      </div>


                                            </div>
                                          </div>
                                        </div>


                                        <div class='col-md-6'>
                                          <div class="panel panel-default">
                                            <div class="panel-heading">
                                              Payment Information
                                            </div>
                                            <div class="panel-body">
                                                   
                                                      <span class="payment-errors"></span>
                                                       
                                                      <div class="form-row">
                                                      <label>
                                                      <span>Card Number</span>
                                                      <input type="text" data-stripe="number" class='form-control fc-mod'/>
                                                      </label>
                                                      </div>
                                                       
                                                      <div class="form-row">
                                                      <label>
                                                      <span>CVC</span>
                                                      <input type="text" size="4" data-stripe="cvc" class='form-control fc-mod'/>
                                                      </label>
                                                      </div>
                                                       
                                                      <div class="form-row">
                                                      <label>
                                                      <span>Expiration (MM/YYYY)</span>
                                                      <div>
                                                      <input type="text" size="2" data-stripe="exp-month" class='form-control fc-mod' style='display:inline-block;width:auto'/>
                                                      </label>
                                                      <span> / </span>
                                                      <input type="text" size="4" data-stripe="exp-year" class='form-control fc-mod' style='display:inline-block;width:auto'/>
                                                      </div></div>
                                                       
                                            </div>
                                          </div>
                                        </div>

                                      </div>
                            </div>

                            <div class="step-pane" id="step3">
                              <div class="center">
                                <h3 class="blue lighter">This is step 3</h3>
                              </div>
                            </div>

                          </div>

                          <hr />
                          <div class="row-fluid wizard-actions">
                            <button class="btn btn-prev">
                              <i class="icon-arrow-left"></i>
                              Prev
                            </button>

                            <button class="btn btn-success btn-next" data-last="Finish ">
                              Next
                              <i class="icon-arrow-right icon-on-right"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>


                  </div>
                </div>
              </div>

</div>

{% endblock %}





{% block scripts %}
<script src="http://www.fuelcdn.com/fuelux-imh/2.4.0/loader.min.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/ace-elements.min.js" type="text/javascript"></script>


<script type="text/javascript">
    $(function () {
        var $wizard = $('#fuelux-wizard'),
            $btnPrev = $('.wizard-actions .btn-prev'),
            $btnNext = $('.wizard-actions .btn-next'),
            $btnFinish = $(".wizard-actions .btn-finish");

        $wizard.wizard().on('finished', function(e) {
            // wizard complete code
        }).on("changed", function(e) {
            var step = $wizard.wizard("selectedItem");
            // reset states
            $btnNext.removeAttr("disabled");
            $btnPrev.removeAttr("disabled");
            $btnNext.show();
            $btnFinish.hide();

            if (step.step === 1) {
                $btnPrev.attr("disabled", "disabled");
            } else if (step.step === 3) {
                $btnNext.hide();
                $btnFinish.show();
            }
        });

        $btnPrev.on('click', function() {
            $wizard.wizard('previous');
        });
        $btnNext.on('click', function() {
            $wizard.wizard('next');
        });
    });
</script>

<script type="text/javascript">
  // This identifies your website in the createToken call below
  Stripe.setPublishableKey('pk_test_rRxLSSz5G1mLU4UdWhJ6BRBe');



// reponse handler >> processing and attatching to form to be submitted

  var stripeResponseHandler = function(status, response) {
  var $form = $('#payment-form');
   
  if (response.error) {
  // Show the errors on the form
  $form.find('.payment-errors').text(response.error.message);
  $form.find('button').prop('disabled', false);
  } else {
  // token contains id, last4, and card type
  var token = response.id;
  // Insert the token into the form so it gets submitted to the server
  $form.append($('<input type="hidden" name="stripeToken" />').val(token));
  // and re-submit
  $form.get(0).submit();
  }
  };



// sends info to stripe so they can create a token

  jQuery(function($) {
    $('#payment-form').submit(function(event) {
      var $form = $(this);

      // Disable the submit button to prevent repeated clicks
      $form.find('button').prop('disabled', true);

      Stripe.card.createToken($form, stripeResponseHandler);

      // Prevent the form from submitting with the default action
      return false;
    });
  });


</script>




{% endblock %}






<!-- 
 <form action="" method="POST" id="payment-form">{% csrf_token %}



          <button type="submit" class='btn btn-primary btn-lg pull-right'>Checkout</button>
      </form>  
 -->